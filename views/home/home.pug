extends ../index

block styles
  include ../theme/theme.pug

block globals
  include ../global/global.pug

  span#g-mining-speed(
    style="display:none" data-value=`${UI_MINING_SPEED}`)
  span#g-persistence(
    style="display:none" data-value=`${UI_PERSISTENCE}`)
  span#g-worker-path(
    style="display:none" data-value="{{UI_WORKER_PATH}}")

block header
  include ../header/header.pug

block content
  content
    h1: | Mine & Mint Proof-of-Work Tokens on Avalanche <img src="/images/png/avalanche-icon/avalanche-64x64.png" height=24 width=24>
    include ../connector/connector.pug
    include ../wallet/wallet.pug

    form#mining
      div.btn-group.toggle-mining(role="group")
        button.btn.btn-outline-warning#toggle-mining(
          type="button" disabled
        )
          span.spinner.spinner-border.spinner-border-sm.float-start(
            role="status" style="visibility: hidden"
          )
          span.text: | Start Mining

        span(
          data-bs-toggle="tooltip" data-bs-placement="top"
          title="Select from one of three XPOW tokens to mine"
        )
          button.btn.btn-outline-warning#select-token.dropdown-toggle(
            type="button" data-bs-toggle="dropdown"
          )
            | {{TOKEN_SUFFIX}}
          ul.dropdown-menu
            li: a.dropdown-item(href="?token=XPOW.CPU")
              | XPOW.CPU: ideal for (in-browser) CPU miners
            li: a.dropdown-item(href="?token=XPOW.GPU")
              | XPOW.GPU: meant for dedicated GPU miners
            li: a.dropdown-item(href="?token=XPOW.ASIC")
              | XPOW.ASIC: choice of professional ASIC miners

        button.btn.btn-outline-warning.info(
          type="button" data-bs-toggle="tooltip" data-bs-placement="top"
          title="Toggle mining for XPOW tokens (w/o minting them)"
        )
          include ../../public/images/pug/info-circle-fill.svg.pug

      div.btn-group.tweak-mining(role="group")
        div.btn-group.decelerator(role="group")
          button.btn.btn-outline-warning#decelerate(
            type="button" data-bs-toggle="tooltip" data-bs-placement="top"
            title="Decelerate mining speed" disabled
          )
            include ../../public/images/pug/dash-circle-fill.svg.pug
        div.btn-group.progressor(
          role="group" data-bs-toggle="tooltip" data-bs-placement="top"
          title=`Mining speed: ${UI_MINING_SPEED}%`
        )
          div.progress: div#speed.progress-bar.with-indicator(
            role="progressbar" style=`width: ${UI_MINING_SPEED}%`
          )
        div.btn-group.accelerator(role="group")
          button.btn.btn-outline-warning#accelerate(
            type="button" data-bs-toggle="tooltip" data-bs-placement="top"
            title="Accelerate mining speed" disabled
          )
            include ../../public/images/pug/plus-circle-fill.svg.pug

    form#minting
      label.form-label(for="mined-nonces")
        | Mined Amounts (not minted yet)
      - let level = 1
      while level <= 64
        - let amount_asic = 16n ** BigInt(level) - 1n
        - let amount_gpu = 2n ** BigInt(level) - 1n
        - let amount_cpu = BigInt(level)
        div.btn-group.mint(
          role="group" data-level=`${level}`
          data-amount-asic=`${amount_asic.toString()}`
          data-amount-gpu=`${amount_gpu.toString()}`
          data-amount-cpu=`${amount_cpu.toString()}`
        )
          button.btn.btn-outline-warning.minter(
            type="button" disabled
          )
            | Mint {{LEVEL_#{level}}} {{TOKEN}}
          button.btn.btn-outline-warning.total(
            type="button" data-bs-toggle="tooltip" data-bs-placement="left"
            title=`Total of {{LEVEL_${level}}} {{TOKEN}} tokens mined`
            disabled
          )
            span.value: | 0
          button.btn.btn-outline-warning.forget(
            type="button" data-bs-toggle="tooltip" data-bs-placement="top"
            title=`Forget the tokens mined so far (w/o minting them)`
            disabled
          )
            | &times;
        - level++

block footer
  include ../footer/footer.pug
